<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./accets/css/login.css">
  <title>Register</title>
</head>
  <body>
  

  <form id="registerForm" action="" method="">

            <h2 class="text-center text-light">Register</h2>

            <div class="form-group py-4">
              <input type="text" class="form-control py-3 inputs" id="name" placeholder="Enter Your Name" autocomplete="off" />
              <label for="name" class="labes">Name</label>
            </div>

            <div class="form-group py-4">
              <input type="text" class="form-control py-3 inputs" id="birth" placeholder="Enter You Birth" autocomplete="off" />
              <label for="birth" class="labes">Birth</label>
            </div>

            <div class="form-group py-4">
              <input type="email" class="form-control py-3 inputs" id="email" placeholder="Enter Your Email" autocomplete="off" />
              <label for="email" class="labes">Email</label>
            </div>

            <div class="form-group py-4">
              <input type="password" class="form-control py-3 inputs" id="password" placeholder="Enter Your Password" autocomplete="off" />
              <label for="password" class="labes">Password</label>
            </div>

            <div class="my-5">
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="accept" />
                <label class="form-check-label text-light" for="accept">I agree to the terms and conditions</label>
              </div>  
            </div>
            
            <div class="d-grid">
              <button type="submit" class="btn text-uppercase fw-bold rounded-0 submit-btns ">Subscribe</button>
            </div>
            <div id="message" style="margin-top: 20px; color: #fff;"></div>
          </form>
        
  

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-auth-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCCihnAZQqfNcoW5KGgempMQSb6oZ4yG4w",
      authDomain: "best-friends-917d6.firebaseapp.com",
      projectId: "best-friends-917d6",
      storageBucket: "best-friends-917d6.appspot.com",
      messagingSenderId: "248999812007",
      appId: "1:248999812007:web:4f15d3f4c4d0d6516ab482"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    const allowedUsers = [
      { name: "Aung Htet Myat Soe", birth: "TECH" },
      { name: "May Paril Kyaw", birth:"2008" },
    ];

    document.getElementById("registerForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      const name = document.getElementById("name").value.trim();
      const birth = document.getElementById("birth").value.trim();
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value;
      

      if (!accept) {
        document.getElementById("message").innerText = "⚠️ Please accept the terms and conditions.";
        return;
      }

      if (!name || !birth || !email || !password) {
        document.getElementById("message").innerText = "⚠️ Please fill in all fields.";
        return;
      }

      const matched = allowedUsers.find(
        (user) => user.name === name && user.birth === birth
      );

      if (!matched) {
        document.getElementById("message").innerText = "❌ Name or birth not allowed.";
        return;
      }

      try {
        await auth.createUserWithEmailAndPassword(email, password);
        document.getElementById("message").innerText = "✅ Registered Successfully!";
        setTimeout(() => {
          window.location.href = "index.html";
        }, 2000);
      } catch (error) {
        document.getElementById("message").innerText = "⚠️ " + error.message;
      }
    });
  </script>
</body>
</html>